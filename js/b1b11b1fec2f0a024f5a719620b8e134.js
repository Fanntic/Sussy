var captcha=angular.module("captcha",[]);captcha.constant("captchaConstants",{template:"<div id='{{captchaElem.id}}' ng-show='captchaElem.isVisible'></div>",googleTemplate:"google-captcha-template",fcTemplate:"fun-captcha-template",fcModalTemplate:"fun-captcha-modal-template"}),captcha.directive("captcha",["$log","$parse","captchaConstants","captchaInterface",function(e,n,o,t){return{restrict:"A",template:o.template,link:function(o,a,i){function r(e,n,i,r){var l,s;a.find("#"+o.captchaElem.id);o.captchaElem.isVisible=!0,l=function(){a.find("#"+o.captchaElem.id).empty(),o.captchaElem.isVisible=!1,angular.isFunction(n)&&n()},s=function(){angular.isFunction(i)&&i()},c?t.reset(e,l,s,r):(t.render(o.captchaElem.id,e,l,s,r),c=!0,t.execute())}var c,l,s;o.captchaElem={isVisible:!1},c=!1,l=n(i.captchaModel)(o),o.captchaElem.id=l.id||t.ids.defaultCaptcha,s=o.$watch((function(){return l.isActivated}),(function(t){if(t){var a=n(i.onCaptchaSuccess)(o)||angular.noop,c=n(i.onCaptchaError)(o)||angular.noop,s=n(i.onCaptchaResponse)(o)||angular.noop,d=n(i.captchaType)(o);if(!d)return void e.debug("[Captcha Error] captcha type cannot be empty");r(d,a,c,s),l.isActivated=!1}}),!0),o.$on("$destroy",(function(){s&&s()}))}}}]),captcha.factory("captchaInterface",["$q",function(){var e=Roblox.Captcha||{};return{types:e.types,ids:e.ids,setEndpoint:e.setEndpoint,setInvisibleMode:e.setInvisibleMode,setSiteKey:e.setSiteKey,reset:e.reset,render:e.render,execute:e.execute}}]),captcha.factory("funCaptchaInterface",["$q",function(){var e=Roblox.FunCaptcha||{};return{ids:Roblox.CaptchaConstants.ids,types:e.types,reset:e.reset,render:e.render}}]),captcha.directive("funCaptcha",["$log","$uibModal","captchaConstants","funCaptchaInterface",function(e,n,o,t){return{restrict:"A",scope:{captchaModel:"=",onFunCaptchaSuccess:"&",onFunCaptchaError:"&",onFunCaptchaSolved:"&",onFunCaptchaLoaded:"&",onFunCaptchaSuppress:"&",onFunCaptchaShown:"&",onFunCaptchaClosed:"&",captchaType:"=",credentialsValue:"=",credentialsType:"=",showInModal:"="},templateUrl:o.fcTemplate,link:function(a,i){function r(){a.showInModal&&(a.showContainer=!1,(l=n.open({templateUrl:o.fcModalTemplate,keyboard:!1,backdrop:"static"})).rendered.then((function(){s=angular.element("#funcaptcha-modal-body"),d=angular.element("#"+a.captchaElem.id).detach(),s.append(d),a.showContainer=!0})),l.result.then((function(){i.append(angular.element("#"+a.captchaElem.id).detach()),a.showContainer=!1,a.onFunCaptchaClosed&&a.onFunCaptchaClosed()}))),a.onFunCaptchaShown&&a.onFunCaptchaShown()}function c(){a.showInModal&&l&&l.close(),a.onFunCaptchaSolved&&a.onFunCaptchaSolved()}var l,s,d,u,p=a.captchaModel;a.captchaElem={id:p.id},a.showContainer=!0,u=a.$watch((function(){return p.isActivated}),(function(n){if(n){var o={successCb:a.onFunCaptchaSuccess||angular.noop,errorCb:function(e){a.onFunCaptchaError&&a.onFunCaptchaError({errorCode:e})},solvedCb:c,loadedCb:a.onFunCaptchaLoaded||angular.noop,suppressCb:a.onFunCaptchaSuppress||angular.noop,shownCb:r,cType:a.captchaType};if(!o.cType)return void e.debug("[Captcha Error] captcha type cannot be empty");p.extraValidationParams?o.extraValidationParams=p.extraValidationParams:a.credentialsValue&&a.credentialsType&&(o.extraValidationParams={credentialsValue:a.credentialsValue,credentialsType:a.credentialsType}),t.render(a.captchaElem.id,o),p.isActivated=!1}}),!0),a.$on("$destroy",(function(){u&&u()}))}}}]),void 0===Roblox&&(Roblox={}),void 0===Roblox.FormEvents&&(Roblox.FormEvents=function(){function e(e,n,o){Roblox.EventStream&&Roblox.EventStream.SendEvent(e,n,o)}return{SendValidationFailed:function(n,o,t,a){e("formValidation",n,{msg:a,input:t,field:o,vis:!0})},SendInteractionFocus:function(n,o){e("formInteraction",n,{aType:"focus",field:o})},SendInteractionOffFocus:function(n,o,t){var a={aType:"offFocus",field:o};t&&(a.input=t),e("formInteraction",n,a)},SendInteractionClick:function(n,o,t,a){var i={aType:"click",field:o};t&&(i.input=t),a&&(i=$.extend(i,a)),e("formInteraction",n,i)}}}());var formEvents=angular.module("roblox.formEvents",[]);formEvents.directive("rbxFormInteraction",(function(){return{require:"^form",restrict:"A",link:function(e,n,o,t){var a=o.sendInputValue;n.bind("blur",(function(){if(Roblox.FormEvents){var e,n=angular.element(this);a&&(e=n.val()),Roblox.FormEvents.SendInteractionOffFocus(t.context,n.attr("name"),e)}})).bind("focus",(function(){Roblox.FormEvents&&Roblox.FormEvents.SendInteractionFocus(t.context,angular.element(this).attr("name"))}))}}})),formEvents.directive("rbxFormContext",(function(){return{require:"form",restrict:"A",link:function(e,n,o,t){var a=t.$name;t.context=o.context+a.charAt(0).toUpperCase()+a.substr(1)}}})),robloxApp.constant("urlConstants",{urlQueryStringPrefix:"?",urlQueryParameterSeparator:"&",hashSign:"#"}),robloxApp.constant("phoneConstants",{templates:{verifyPhoneModal:"verify-phone-modal"},urls:{phonePrefixes:"/v1/countries/phone-prefix-list",addPhone:"/v1/phone",verifyPhone:"/v1/phone/verify",resendCode:"/v1/phone/resend"},modalTypes:{addPhone:"addPhone",verifyPhone:"verifyPhone"},minimumPhoneLength:4,underscore:"_",phonePrefixCharacter:"+",defaultCountryCode:"US",unitedStatesPrefix:{name:"United States",localizedName:"United States",code:"US",prefix:1}}),robloxApp.factory("phoneService",["$q","httpService","phoneConstants",function(e,n,o){var t=o.urls.phonePrefixes,a=o.defaultCountryCode;return{getPhonePrefixes:function(e){var o={url:e+t};return n.httpGet(o,null).then((function(e){var n;return _.reject(e,(function(e){return e.code===a&&(n=e,!0)})),n&&e.unshift(n),e}))},addPhone:function(e){var t={url:Roblox.EnvironmentUrls.accountInformationApi+o.urls.addPhoneV2},a={countryCode:e.countryCode,prefix:e.prefix,phone:e.phone,password:e.password};return n.httpPost(t,a)},verifyPhone:function(e){var t={url:Roblox.EnvironmentUrls.accountInformationApi+o.urls.verifyPhoneV2},a={code:e.code};return n.httpPost(t,a)},resendCode:function(){var e={url:Roblox.EnvironmentUrls.accountInformationApi+o.urls.resendCodeV2};return n.httpPost(e)},isPhoneNumber:function(e){return!(!e||e.length<o.minimumPhoneLength)&&(!!/\d/.test(e)&&/^[\d|\W|_]+$/.test(e))}}}]),void 0===Roblox&&(Roblox={}),void 0===Roblox.GenericConfirmation&&(Roblox.GenericConfirmation=function(){function e(e){e.hasClass(c)?e.addClass(d):e.hasClass(i)?e.addClass(l):e.hasClass(r)&&e.addClass(s)}function n(e){return!!(e.hasClass(s)||e.hasClass(d)||e.hasClass(l))}function o(e){f.isOpen=!1,void 0!==e?$.modal.close(e):$.modal.close()}function t(e){o(),"function"==typeof e&&e()}function a(e){if("function"==typeof e){var n=e();if("undefined"!==n&&0==n)return!1}o()}var i="btn-primary",r="btn-neutral",c="btn-negative",l="btn-disabled-primary",s="btn-disabled-neutral",d="btn-disabled-negative",u="#roblox-confirm-btn",p="#roblox-decline-btn",f={isOpen:!1},m={overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){f.isOpen=!1,o()}};return{open:function(e){var o,i,l,s,d;f.isOpen=!0,o={titleText:"",bodyContent:"",footerText:"",acceptText:Roblox.Resources.GenericConfirmation.yes,declineText:Roblox.Resources.GenericConfirmation.No,acceptColor:r,declineColor:c,xToCancel:!1,onAccept:function(){return!1},onDecline:function(){return!1},onCancel:function(){return!1},imageUrl:null,allowHtmlContentInBody:!1,allowHtmlContentInFooter:!1,dismissable:!0,fieldValidationRequired:!1,onOpenCallback:function(){}},e=$.extend({},o,e),m.overlayClose=e.dismissable,m.escClose=e.dismissable,(i=$(u)).html(e.acceptText),i.attr("class","btn-large "+e.acceptColor),i.unbind(),i.bind("click",(function(){return n(i)||(e.fieldValidationRequired?a(e.onAccept):t(e.onAccept)),!1})),(l=$(p)).html(e.declineText),l.attr("class","btn-large "+e.declineColor),l.unbind(),l.bind("click",(function(){return n(l)||t(e.onDecline),!1})),$('[data-modal-handle="confirmation"] div.Title').text(e.titleText),s=$("[data-modal-handle='confirmation']"),null==e.imageUrl?s.addClass("noImage"):(s.find("img.GenericModalImage").attr("src",e.imageUrl),s.removeClass("noImage")),e.allowHtmlContentInBody?$("[data-modal-handle='confirmation'] div.Message").html(e.bodyContent):$("[data-modal-handle='confirmation'] div.Message").text(e.bodyContent),""==$.trim(e.footerText)?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').hide():$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').show(),e.allowHtmlContentInFooter?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').html(e.footerText):$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').text(e.footerText),$("[data-modal-handle='confirmation']").modal(m),(d=$("a.genericmodal-close")).unbind(),d.bind("click",(function(){return t(e.onCancel),!1})),e.xToCancel||d.hide(),e.onOpenCallback()},close:o,disableButtons:function(){var n=$(u),o=$(p);e(n),e(o)},enableButtons:function(){var e=$(u),n=$(p),o=s+" "+d+" "+l;e.removeClass(o),n.removeClass(o)},clickYes:function(){f.isOpen&&$(u).click()},clickNo:function(){$(p).click()},status:f,green:i,blue:r,gray:c,none:"btn-none"}}()),$(document).keypress((function(e){Roblox.GenericConfirmation.status.isOpen&&13===e.which&&Roblox.GenericConfirmation.clickYes()})),void 0===Roblox&&(Roblox={}),void 0===Roblox.Dialog&&(Roblox.Dialog=function(){function e(e){e.hasClass(l)?e.addClass(u):e.hasClass(r)?e.addClass(s):e.hasClass(c)&&e.addClass(d)}function n(e){return!!(e.hasClass(d)||e.hasClass(u)||e.hasClass(s))}function o(e){e.hasClass(u)?(e.removeClass(u),e.addClass(l)):e.hasClass(s)?(e.removeClass(s),e.addClass(r)):e.hasClass(d)&&(e.removeClass(d),e.addClass(c))}function t(e){h.isOpen=!1,void 0!==e?$.modal.close(e):$.modal.close(),$("#rbx-body").removeClass("modal-mask")}function a(e){t(),"function"==typeof e&&e()}var i=".simplemodal-container",r="btn-primary-md",c="btn-secondary-md",l="btn-control-md",s="btn-primary-md disabled",d="btn-secondary-md disabled",u="btn-control-md disabled",p=".modal-btns #confirm-btn",f=".modal-btns #decline-btn",m="#modal-checkbox-input",h={isOpen:!1},C={overlayClose:!0,escClose:!0,opacity:80,zIndex:1040,overlayCss:{backgroundColor:"#000"},onClose:t,focus:!1},b={Yes:"Yes",No:"No",Agree:"Agree"};return{open:function(r){var s,d,u,x,v,g;h.isOpen=!0,s={titleText:"",bodyContent:"",footerText:"",footerMiddleAligned:!1,acceptText:Roblox.Lang.ControlsResources["Action.Yes"]||b.Yes,declineText:Roblox.Lang.ControlsResources["Action.No"]||b.No,acceptColor:c,declineColor:l,xToCancel:!1,onAccept:function(){return!1},onDecline:function(){return!1},onCancel:function(){return!1},imageUrl:null,showAccept:!0,showDecline:!0,allowHtmlContentInBody:!1,allowHtmlContentInFooter:!1,dismissable:!0,fieldValidationRequired:!1,onOpenCallback:function(){},onCloseCallback:t,cssClass:null,checkboxAgreementText:Roblox.Lang.ControlsResources["Action.Agree"]||b.Agree,checkboxAgreementRequired:!1},r=$.extend({},s,r),C.overlayClose=r.dismissable,C.escClose=r.dismissable,r.onCloseCallback&&(C.onClose=function(){r.onCloseCallback(),t()}),(d=$(p)).html(r.acceptText),d.attr("class",r.acceptColor),d.unbind(),d.bind("click",(function(){return n(d)||(r.fieldValidationRequired?function(e){if("function"==typeof e){var n=e();if("undefined"!==n&&0==n)return!1}t()}(r.onAccept):a(r.onAccept)),!1})),(u=$(f)).html(r.declineText),u.attr("class",r.declineColor),u.unbind(),u.bind("click",(function(){return n(u)||a(r.onDecline),!1})),(x=$(m)).unbind(),x.bind("change",(function(){x.is(":checked")?o(d):e(d)})),(v=$('[data-modal-type="confirmation"]')).find(".modal-title").text(r.titleText),null==r.imageUrl?v.addClass("noImage"):(v.find("img.modal-thumb").attr("src",r.imageUrl),v.removeClass("noImage")),h.extraClass&&(v.removeClass(h.extraClass),h.extraClass=!1),null!=r.cssClass&&(v.addClass(r.cssClass),h.extraClass=r.cssClass),r.allowHtmlContentInBody?v.find(".modal-message").html(r.bodyContent):v.find(".modal-message").text(r.bodyContent),r.checkboxAgreementRequired?(e(d),v.find(".modal-checkbox.checkbox > input").prop("checked",!1),v.find(".modal-checkbox.checkbox > label").text(r.checkboxAgreementText),v.find(".modal-checkbox.checkbox").show()):(v.find(".modal-checkbox.checkbox > input").prop("checked",!0),v.find(".modal-checkbox.checkbox").hide()),""==$.trim(r.footerText)?v.find(".modal-footer").hide():v.find(".modal-footer").show(),r.allowHtmlContentInFooter?v.find(".modal-footer").html(r.footerText):v.find(".modal-footer").text(r.footerText),r.footerMiddleAligned&&v.find(".modal-footer").addClass("modal-footer-center"),v.modal(C),(g=$(i+" .modal-header .close")).unbind(),g.bind("click",(function(){return a(r.onCancel),!1})),r.xToCancel||g.hide(),r.showAccept||d.hide(),r.showDecline||u.hide(),$("#rbx-body").addClass("modal-mask"),r.onOpenCallback()},close:t,disableButtons:function(){var n=$(p),o=$(f);e(n),e(o)},enableButtons:function(){var e=$(p),n=$(f);o(e),o(n)},clickYes:function(){h.isOpen&&$(p).click()},clickNo:function(){$(f).click()},status:h,toggleProcessing:function(e,n){var o=$(".modal-body");e?(o.find(".modal-btns").hide(),o.find(".modal-processing").show()):(o.find(".modal-btns").show(),o.find(".modal-processing").hide()),void 0!==n&&""!==n&&$.modal.close("."+n)},green:r,blue:c,white:l,none:"btn-none"}}()),$(document).keypress((function(e){Roblox.Dialog.isOpen&&13===e.which&&Roblox.Dialog.clickYes()}));var Roblox=Roblox||{};Roblox.DeviceMeta=function(){var e=document.querySelector('meta[name="device-meta"]');if(null!==e){var n=e.dataset||{},o={android:"android",ios:"ios",xbox:"xbox",uwp:"uwp",amazon:"amazon",win32:"win32",universalapp:"universalApp",unknown:"unknown"},t={computer:"computer",tablet:"tablet",phone:"phone",console:"console"};return function(){return{deviceType:t[n.deviceType]||"",appType:o[n.appType]||"",isInApp:"true"===n.isInApp,isDesktop:"true"===n.isDesktop,isPhone:"true"===n.isPhone,isTablet:"true"===n.isTablet,isConsole:"true"===n.isConsole,isAndroidApp:"true"===n.isAndroidApp,isIosApp:"true"===n.isIosApp,isUWPApp:"true"===n.isUwpApp,isXboxApp:"true"===n.isXboxApp,isAmazonApp:"true"===n.isAmazonApp,isWin32App:"true"===n.isWin32App,isStudio:"true"===n.isStudio,isIosDevice:"true"===n.isIosDevice,isAndroidDevice:"true"===n.isAndroidDevice,isUniversalApp:"true"===n.isUniversalApp}}}console.debug("Error loading device information from meta tag - please check if meta tag is present")}(),Roblox&&Roblox.BundleDetector&&Roblox.BundleDetector.bundleDetected("page");