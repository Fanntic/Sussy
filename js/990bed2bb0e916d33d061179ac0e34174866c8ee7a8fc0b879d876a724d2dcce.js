!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=jQuery,n=e.n(t),a=Roblox;function o(e){var t=new(n().Deferred);return a.Hybrid.Game.launchGame(e,(function(){t.resolve(e)})),t}var r,i,l={joinMultiplayerGame:function(e){var t=!0===e.isPlayTogetherGame;return o({requestType:a.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),isPlayTogetherGame:t,browserTrackerId:a.Cookies.getBrowserTrackerId()})},followPlayerIntoGame:function(e){return o({requestType:a.Hybrid.Game.LAUNCH_MODES.FOLLOW_USER,userId:e.userId.toString(),browserTrackerId:a.Cookies.getBrowserTrackerId()})},joinGameInstance:function(e){var t=!0===e.isPlayTogetherGame;return o({requestType:a.Hybrid.Game.LAUNCH_MODES.GAME_INSTANCE,placeId:e.placeId.toString(),instanceId:e.gameId,isPlayTogetherGame:t,browserTrackerId:a.Cookies.getBrowserTrackerId()})},joinPrivateGame:function(e){return o({requestType:a.Hybrid.Game.LAUNCH_MODES.PRIVATE_SERVER,placeId:e.placeId.toString(),accessCode:e.accessCode,browserTrackerId:a.Cookies.getBrowserTrackerId()})},playTogetherGame:function(e){return o({requestType:a.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),conversationId:e.conversationId.toString(),browserTrackerId:a.Cookies.getBrowserTrackerId()})}},c="soli-modal",s="/login?returnurl=",d="/?returnurl=",u="gameDetails",p="gameLaunch_login",m="gameLaunch_signup";n()(document).ready((function(){r=new a.TranslationResourceProvider,i=r.getTranslationResource("Feature.GameLaunchGuestMode")}));var v={restrictGuests:function(e){var t=new(n().Deferred);return"True"===n()("#PlaceLauncherStatusPanel").data("is-user-logged-in")?t.resolve(e):a.Dialog.open({titleText:i.get("Heading.Dialog.SignUpOrLogin"),bodyContent:i.get("Description.Dialog.SignUpOrLogin"),cssClass:c,acceptColor:a.Dialog.green,acceptText:i.get("Action.Dialog.SignUp"),declineText:i.get("Action.Dialog.Login"),onDecline:function(){a.FormEvents&&a.FormEvents.SendInteractionClick(u,p);var e=s+encodeURIComponent(window.location.pathname+window.location.search);window.location.href=a.Endpoints?a.Endpoints.getAbsoluteUrl(e):e},onAccept:function(){var e;e=m,a.FormEvents&&a.FormEvents.SendInteractionClick("gameDetails",e),e=d+encodeURIComponent(window.location.pathname+window.location.search),window.location.href=a.Endpoints?a.Endpoints.getAbsoluteUrl(e):e}}),t}},g=CoreUtilities,h={bars:[],init:function(e,t,n,a){var o=this.get(e);null==o&&(o={}),o.barID=e,o.innerBarID=t,o.percentageID=n,void 0===a&&(o.percentComplete=0),this.bars.push(o),this.update(e,o.percentComplete)},get:function(e){for(var t=0;t<this.bars.length;t+=1)if(this.bars[t].barID===e)return this.bars[t];return null},dispose:function(e){for(var t=0;t<this.bars.length;t+=1)this.bars[t].barID===e&&this.bars.splice(t,1)},update:function(e,t){var a=this.get(e);a&&(1<t&&(t=1),e=n()("#".concat(e)).width(),e=Math.round(e*t),n()("#".concat(a.innerBarID)).animate({width:e},200,"swing"),a.percentageID&&0<n()("#".concat(a.percentageID)).length&&n()("#".concat(a.percentageID)).html("".concat(Math.round(100*t),"%")),a.percentComplete=t)}},f={newValue:"",showVideoPreRoll:!1,videoInitialized:!1,videoStarted:!1,videoCompleted:!1,videoSkipped:!1,videoCancelled:!1,videoErrored:!1,loadingBarMaxTime:3e4,loadingBarCurrentTime:0,loadingBarIntervalID:0,loadingBarID:"videoPrerollLoadingBar",loadingBarInnerID:"videoPrerollLoadingBarCompleted",loadingBarPercentageID:"videoPrerollLoadingPercent",videoDiv:"videoPrerollMainDiv",companionAdDiv:"videoPrerollCompanionAd",contentElement:"contentElement",videoLoadingTimeout:7e3,videoPlayingTimeout:23e3,videoLogNote:"",logsEnabled:!1,includedPlaceIds:"",isSwfPreloaderEnabled:!1,isFlashInstalled:!1,isPrerollShownEveryXMinutesEnabled:!1,isAgeTargetingEnabled:!0,isAgeOrSegmentTargetingEnabled:!1,adUnit:"",adTime:0,placeId:0,customTargeting:{userAge:"",userAgeOrSegment:"",userGender:"",gameGenres:"",environment:"",adTime:"",PLVU:!1},adsManager:null,adsLoader:null,adDisplayContainer:null,intervalTimer:null,videoContent:null,isCompanionAdRenderedByGoogleTag:!1};function b(){f.adsLoader.contentComplete()}function y(){f.videoContent=document.getElementById(f.contentElement)}function w(){f.adDisplayContainer=new window.google.ima.AdDisplayContainer(document.getElementById(f.videoDiv),f.videoContent)}function I(){var e="&iu=".concat(f.adUnit),t="";return f.isAgeTargetingEnabled&&(t+="&Age=".concat(f.customTargeting.userAge)),f.isAgeOrSegmentTargetingEnabled&&(t+="&A=".concat(f.customTargeting.userAgeOrSegment)),t=encodeURIComponent("Env=".concat(f.customTargeting.environment,"&Gender=").concat(f.customTargeting.userGender).concat(t,"&Genres=").concat(f.customTargeting.gameGenres,"&PlaceID=").concat(f.placeId,"&Time=").concat(f.customTargeting.adTime,"&PLVU=").concat(f.customTargeting.PLVU)),"".concat("http://pubads.g.doubleclick.net/gampad/ads?impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]").concat("&sz=400x300").concat(e).concat("&ciu_szs=300x250","&cust_params=").concat(t,"&")}function P(){window.googletag.defineSlot(f.adUnit,[300,250],f.companionAdDiv).addService(window.googletag.companionAds()),window.googletag.enableServices(),window.googletag.display(f.companionAdDiv)}function C(e){switch(e.type){case window.google.ima.AdEvent.Type.LOADED:break;case window.google.ima.AdEvent.Type.STARTED:if(f.videoStarted=!0,f.isCompanionAdRenderedBywindow.googletag){if(!window.googletag)break;window.googletag.cmd.push(P)}else{var t=e.getAd().getCompanionAds(300,250);0<t.length&&(t=t[0].getContent(),document.getElementById(f.companionAdDiv).innerHTML=t)}break;case window.google.ima.AdEvent.Type.SKIPPED:f.videoCompleted=!0,f.videoSkipped=!0,f.showVideoPreRoll=!1;break;case window.google.ima.AdEvent.Type.COMPLETE:f.videoStarted&&!1===f.videoCancelled&&(f.videoCompleted=!0,f.showVideoPreRoll=!1,""!==f.newValue&&n().cookie("RBXVPR",f.newValue,180))}}function E(){f.videoErrored=!0,f.videoCompleted=!0,f.videoLogNote="AdError"}function L(e){f.adsManager=e.getAdsManager(f.videoContent),f.adsManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,E),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.LOADED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.STARTED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.SKIPPED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,C);try{f.adsManager.init(400,300,window.google.ima.ViewMode.NORMAL),f.adsManager.start()}catch(e){E()}}function S(){window.google.ima.settings.setVpaidAllowed(!0),y(),w(),f.adDisplayContainer.initialize(),f.adsLoader=new window.google.ima.AdsLoader(f.adDisplayContainer),f.adsLoader.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,L,!1),f.adsLoader.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,E,!1),f.videoContent.addEventListener("ended",b);var e=new window.google.ima.AdsRequest,t=I();e.adTagUrl=t,e.linearAdSlotWidth=400,e.linearAdSlotHeight=300,e.nonLinearAdSlotWidth=400,e.nonLinearAdSlotHeight=300,f.adsLoader.requestAds(e)}function A(){var e=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(t){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}return e}function T(){if(f.logsEnabled){var e="";if(f.videoCompleted)e="Complete",""===f.videoLogNote&&(f.videoLogNote="NoTimeout"),f.logsEnabled=!1;else if(f.videoCancelled)e="Cancelled",f.videoLogNote=window.RobloxLaunch.state;else{if(!1!==f.videoInitialized||""===f.videoLogNote)return;e="Failed",f.logsEnabled=!1}a.GaEventSettings.gaDFPPreRollEnabled&&window.GoogleAnalyticsEvents&&window.GoogleAnalyticsEvents.FireEvent(["DFPPreRoll",e,f.videoLogNote])}}function D(){return!!f.videoInitialized&&(f.videoInitialized&&!f.videoStarted&&f.loadingBarCurrentTime>f.videoLoadingTimeout&&(f.videoCompleted=!0,f.videoLogNote="LoadingTimeout"),f.videoStarted&&!f.videoCompleted&&f.loadingBarCurrentTime>f.videoPlayingTimeout&&(f.videoCompleted=!0,f.videoLogNote="PlayingTimeout"),!f.videoCompleted)}function G(){var e=encodeURIComponent(I());e="adTagUrl=".concat(e);n().ajax({url:"/game/preloader",data:{url:e},method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}}).success((function(e){n()("#videoPrerollMainDiv").html(e),f.videoErrored||(f.videoStarted=!0)}))}function x(){n().ajax({url:"/game/updateprerollcount",method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}})}Object.assign(f,{contentEndedListener:b,createVideoContent:y,createAdDisplayContainer:w,constructUrl:I,renderCompanionAd:P,onAdEvent:C,onAdError:E,onAdsManagerLoaded:L,requestAds:S,checkFlashEnabled:A,checkEligibility:function(){f.showVideoPreRoll&&(A()&&(f.isFlashInstalled=!0),"True"===n()("#PlaceLauncherStatusPanel").data("is-protocol-handler-launch-enabled")||a.Client.IsRobloxInstalled()?void 0===window.google||void 0===window.google.ima?(f.videoLogNote="NoGoogle",f.showVideoPreRoll=!1):a.Client.isIDE()?(f.videoLogNote="RobloxStudio",f.showVideoPreRoll=!1):a.Client.isRobloxBrowser()?(f.videoLogNote="RobloxPlayer",f.showVideoPreRoll=!1):(window.chrome||window.safari)&&"#chromeInstall"===window.location.hash&&(f.showVideoPreRoll=!1):f.showVideoPreRoll=!1)},logVideoPreRoll:T,isPlaying:D,correctIEModalPosition:function(e){var t,a;e.container.innerHeight()<=30&&(t=n()("#videoPrerollPanel"),a=-Math.floor(t.innerHeight()/2),t.css({position:"relative",top:"".concat(a,"px")}),e.container.find(".VprCloseButton").css({top:"".concat(a-10,"px"),"z-index":"1003"}))},renderImaPreloader:G,updatePrerollCount:x,start:function(){0===f.placeId&&"undefined"!=typeof play_placeId&&(f.placeId=play_placeId),f.videoInitialized=!0,f.videoStarted=!1,f.videoCancelled=!1,f.videoCompleted=!1,f.videoSkipped=!1,f.loadingBarCurrentTime=0,f.videoLogNote="",h.init(f.loadingBarID,f.loadingBarInnerID,f.loadingBarPercentageID),f.loadingBarIntervalID=setInterval((function(){f.loadingBarCurrentTime+=1e3,h.update(f.loadingBarID,f.loadingBarCurrentTime/f.loadingBarMaxTime)}),1e3),(f.isSwfPreloaderEnabled&&f.isFlashInstalled?G:S)()},cancel:function(){f.videoCancelled=!0,n().modal.close()},skip:function(){f.videoCompleted=!0,f.videoSkipped=!0,f.showVideoPreRoll=!1},close:function(){window.MadStatus&&window.MadStatus.running&&window.MadStatus.stop(""),window.RobloxLaunch.launcher&&(window.RobloxLaunch.launcher._cancelled=!0),clearInterval(f.loadingBarIntervalID),h.dispose(f.loadingBarID),D()&&(f.videoCancelled=!0),n().modal.close(),T(),f.isPrerollShownEveryXMinutesEnabled&&f.videoInitialized&&f.videoCompleted&&x()}});var R=f,O={waitForPreroll:function(e){var t,a,o=new(n().Deferred),r=R;return r.placeId=void 0!==e.placeId?e.placeId:0,r.showVideoPreRoll?(t={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},zIndex:1031,onShow:function(e){r.correctIEModalPosition(e),r.start(),n()("#prerollClose").hide(),n()("#prerollClose").delay(1e3*r.adTime).show(300)},onClose:function(){r.close()},closeHTML:'<a href="#" id="prerollClose" class="ImageButton closeBtnCircle_35h ABCloseCircle VprCloseButton"></a>'},n()("#videoPrerollPanel").modal(t),a=setInterval((function(){r.isPlaying()||(n().modal.close(),clearInterval(a),r.videoCancelled?o.reject(e):o.resolve(e))}),200)):(o.resolve(e),r.logVideoPreRoll()),o}};function U(e,t,n,a,o,r,i){try{var l=e[r](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(a,o)}function k(e,t){var n,a=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)),a}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){var a,o;a=e,t=n[o=t],o in a?Object.defineProperty(a,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M,j={gameLaunchInterface:null,gameLaunchLogger:null,initialized:new Promise((function(e,t){M=e}))};function N(e,t,n){return t=B(B({},e),{},{joinAttemptId:null!=t?t:g.uuidService.generateRandomUuid()}),n&&(t.joinAttemptOrigin=n),t}function F(e,t,n){var o,r;3<arguments.length&&void 0!==arguments[3]&&arguments[3]&&4<arguments.length&&void 0!==arguments[4]&&arguments[4]&&(o=e,r={url:"".concat(a.EnvironmentUrls.gameJoinApi,"/v1/team-create-preemptive"),withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}},o={gameJoinAttemptId:g.uuidService.generateRandomUuid(),placeId:o},g.httpService.post(r,o)),j.gameLaunchInterface.editGameInStudio(e,t,n)}function V(e){var t=3<arguments.length?arguments[3]:void 0,n=4<arguments.length?arguments[4]:void 0;e={placeId:e,isPlayTogetherGame:!0===(2<arguments.length?arguments[2]:void 0)};return j.gameLaunchInterface.isJoinAttemptIdEnabled&&(e=N(e,t,n)),v.restrictGuests(e).then(O.waitForPreroll).then(j.gameLaunchInterface.joinMultiplayerGame)}function _(){var e;return e=regeneratorRuntime.mark((function e(t,n,a,o,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.initialized;case 2:return i={placeId:t,accessCode:n,linkCode:a},j.gameLaunchInterface.isJoinAttemptIdEnabled&&(i=N(i,o,r)),i=O.waitForPreroll(i).then(j.gameLaunchInterface.joinPrivateGame),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})),(_=function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){U(r,a,o,i,l,"next",e)}function l(e){U(r,a,o,i,l,"throw",e)}i(void 0)}))}).apply(this,arguments)}n().fn.bindGameLaunch=function(){return this.find(".VisitButtonPlayGLI").click((function(){var e=n()(this);V(e.attr("placeid"),e.data("is-membership-level-ok"))})),this.find(".VisitButtonEditGLI").click((function(){var e=n()(this);F(e.attr("placeid"),e.data("universeid"),!!e.data("allowupload"))})),this},n()(document).ready((function(){n()("body").bindGameLaunch()})),Object.assign(j,{authenticationChecker:v,prerollPlayer:O,joinMultiplayerGame:V,openStudio:function(){j.gameLaunchInterface.openStudio()},openPluginInStudio:function(e){j.gameLaunchInterface.openPluginInStudio(e)},editGameInStudio:F,followPlayerIntoGame:function(e,t,n){return e={userId:e},j.gameLaunchInterface.isJoinAttemptIdEnabled&&(e=N(e,t,n)),v.restrictGuests(e).then(O.waitForPreroll).then(j.gameLaunchInterface.followPlayerIntoGame)},joinGameInstance:function(e,t,n,a,o,r){return a={placeId:e,gameId:t,isPlayTogetherGame:!0===a},j.gameLaunchInterface.isJoinAttemptIdEnabled&&(a=N(a,o,r)),v.restrictGuests(a).then(O.waitForPreroll).then(j.gameLaunchInterface.joinGameInstance)},joinPrivateGame:function(e,t,n,a,o){return _.apply(this,arguments)},playTogetherGame:function(e,t,n,a){return t={placeId:e,conversationId:t},j.gameLaunchInterface.isJoinAttemptIdEnabled&&(t=N(t,n,a)),v.restrictGuests(t).then(O.waitForPreroll).then(j.gameLaunchInterface.playTogetherGame)},setGameLaunchInterface:function(e){j.gameLaunchInterface=e,M()},setGameLaunchLogger:function(e){j.gameLaunchLogger=e},tryAssetInStudio:function(e){j.gameLaunchInterface.tryAssetInStudio(e)},isJoinAttemptIdEnabled:function(){var e;return null===(e=j.gameLaunchInterface)||void 0===e?void 0:e.isJoinAttemptIdEnabled},startClientAttemptedEvent:"startClientAttempted",startClientFailedEvent:"startClientFailed",startClientSucceededEvent:"startClientSucceeded",beginInstallEvent:"beginInstall",successfulInstallEvent:"successfulInstall",manualDownloadEvent:"manualDownload"});var H=j,q={lastContext:"unknown",contextCategories:{joinUser:"JoinUser"}};function J(e,t,o,r,i){null!==t&&""!==t&&"unknown"!==t&&(q.lastContext=t),a.EventStream.SendEvent(e,q.lastContext,function(e,t,a){var o,r=n()("#PlaceLauncherStatusPanel");return{lType:r&&r.data("is-protocol-handler-launch-enabled")&&"true"===r.data("is-protocol-handler-launch-enabled").toLowerCase()?"protocol":"plugin",pid:e,refuid:t,pg:(o=window.location.pathname.toLowerCase(),e="profile",-1!==(t=o.lastIndexOf(e))&&o.length===t+e.length?e:-1!==o.indexOf("/develop")?"develop":"/discover"===o?"games":"gameDetail"),joinAttemptId:"True"===(null!==(r=r.data("is-join-attempt-id-enabled"))&&void 0!==r?r:"False")?a:void 0}}(o,r,i))}Object.assign(q,{SendGamePlayIntent:function(e,t,a,o){J("gamePlayIntent",e,t,a,o),n()(document).trigger("playButton:gamePlayIntent")},SendDevelopIntent:function(e,t){J("developIntent",e,t)},SendInstallBegin:function(e,t){J("installBegin",e,t)},SendInstallSuccess:function(e,t){J("installSuccess",e,t)},SendClientStartAttempt:function(e,t){J("clientStartAttempt",e,t)},SendClientStartSuccessWeb:function(e,t){J("clientStartSuccessWeb",e,t)},SendManualDownloadClick:function(e,t){J("manualDownload",e,t)}});var z=q,W={logToConsoleEnabled:!1,logToGAEnabled:!0,logToEphemeralCountersEnabled:!0},X={};X[H.startClientAttemptedEvent]=["GameLaunchAttempt_<os>","GameLaunchAttempt_<os>_<launchmethod>"],X[H.startClientSucceededEvent]=["GameLaunchSuccessWeb_<os>","GameLaunchSuccessWeb_<os>_<launchmethod>"];var K={};a.GaEventSettings.gaLaunchAttemptAndLaunchSuccessEnabled&&(K[H.startClientAttemptedEvent]="Launch Attempt",K[H.startClientSucceededEvent]="Launch Success"),K[H.beginInstallEvent]="Install Begin",K[H.successfulInstallEvent]="Install Success",K[H.manualDownloadEvent]="Manual Download";var Y={};function Q(e){W.logToConsoleEnabled&&console.log(e)}function Z(e,t){var a;W.logToEphemeralCountersEnabled&&("Windows"===(a=n()("#PlaceLauncherStatusPanel").data("os-name"))&&(a="Win32"),e=(e=e.replace("<os>",a)).replace("<launchmethod>",t),null!==(t=window.EventTracker)&&void 0!==t&&t.fireEvent&&window.EventTracker.fireEvent(e))}function $(e,t,n,a){void 0!==window.GoogleAnalyticsEvents&&W.logToGAEnabled&&window.GoogleAnalyticsEvents.FireEvent&&window.GoogleAnalyticsEvents.FireEvent([e,t,n,a])}function ee(e,t){Q("".concat(e.type,": ").concat(JSON.stringify(t))),X[e.type]&&n().each(X[e.type],(function(e,n){Z(n,t.launchMethod)})),K[e.type]&&$(t.launchMethod,K[e.type],t.params.launchMode,0),"True"===n()("#PlaceLauncherStatusPanel").data("event-stream-for-protocol-enabled")&&Y[e.type]&&Y[e.type](null,t.params.placeId)}Y[H.startClientAttemptedEvent]=z.SendClientStartAttempt,Y[H.startClientSucceededEvent]=z.SendClientStartSuccessWeb,Y[H.beginInstallEvent]=z.SendInstallBegin,Y[H.successfulInstallEvent]=z.SendInstallSuccess,Y[H.manualDownloadEvent]=z.SendManualDownloadClick,Object.assign(W,{logToConsole:Q,logToEphemeralCounters:Z,logToGA:$}),n()(document).ready((function(){var e=[H.startClientAttemptedEvent,H.startClientFailedEvent,H.startClientSucceededEvent,H.beginInstallEvent,H.successfulInstallEvent,H.manualDownloadEvent];n()(H).on(e.join(" "),ee)}));var te=W;function ne(e,t){var n,a=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)),a}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){var a,o;a=e,t=n[o=t],o in a?Object.defineProperty(a,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={isInstalling:!1,statusInterval:0,robloxLocale:"",gameLocale:"",protocolUrlSeparator:"+",protocolUrlIncludesLaunchTime:!1,protocolDetectionEnabled:!1,avatarParamEnabled:!0,separateScriptParamsEnabled:!1,waitTimeBeforeFailure:300,protocolNameForStudio:"roblox-studio",protocolNameForClient:"roblox-client",logger:null,channel:"",studioChannel:"",playerChannel:"",isDuarAutoOptInEnabled:!1,isDuarOptOutDisabled:!1,isJoinAttemptIdEnabled:!1},re="Global",ie="edit",le="plugin",ce="app",se="asset";function de(e){return e===ie||e===le||e===se}function ue(e,t){function o(){clearTimeout(s),e()}var r,i,l,c,s=setTimeout((function(){n().modal.close(),function(e,t){var o="True"===a.PlaceLauncher.Resources.RefactorEnabled,r=de(t.launchMode);if(o)return r=r?a.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.studio:a.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.play,a.Dialog.open({bodyContent:r.content,allowHtmlContentInBody:!0,showAccept:!0,acceptColor:a.Dialog.green,acceptText:r.buttonText,showDecline:!1,dismissable:!1,xToCancel:!0,footerText:r.footerContent,allowHtmlContentInFooter:!0,onAccept:function(){Ee(t)},cssClass:"protocolhandler-are-you-installed-modal"});n()("#ProtocolHandlerAreYouInstalled").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){e(),n()("#ProtocolHandlerInstallButton").off("click"),n().modal.close()},zIndex:1031}),n()("#ProtocolHandlerInstallButton, #ProtocolHandlerStudioInstallButton").click((function(){Ee(t)}))}(o,t)}),5e3);r=o,i=t.launchMode,l="True"===a.PlaceLauncher.Resources.RefactorEnabled,c=de(i),l?(i=(c?a.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.studio:a.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.play).content,l=a.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.loader,a.Dialog.open({bodyContent:i+l,allowHtmlContentInBody:!0,showAccept:!1,showDecline:!1,dismissable:!1,cssClass:"protocolhandler-starting-modal",onCloseCallback:r,onCancel:function(){r(),n().modal.close()}})):(c?n()(".protocol-handler-container").each((function(){n()(this).find(".play-modal").addClass("hidden"),n()(this).find(".studio-modal").removeClass("hidden")})):n()(".protocol-handler-container").each((function(){n()(this).find(".play-modal").removeClass("hidden"),n()(this).find(".studio-modal").addClass("hidden")})),n()("#ProtocolHandlerStartingDialog").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){r(),n().modal.close()},zIndex:1031}))}function pe(){n().modal.close(),a.Dialog.open({titleText:a.Lang.VisitGameResources["Heading.ErrorStartingGame"],bodyContent:a.Lang.VisitGameResources["Response.Dialog.ErrorLaunching"],acceptText:a.Lang.ControlsResources["Action.OK"]||"OK",showDecline:!1})}function me(e){var t=new(n().Deferred);return clearInterval(oe.statusInterval),oe.statusInterval=setInterval((function(){var o=a.Endpoints.getAbsoluteUrl("/client-status");n().ajax(o,{success:function(n){"Unknown"!==n&&(t.resolve(e),clearInterval(oe.statusInterval))},cache:!1})}),3e3),t}function ve(e){n().modal.close(),e={launchMethod:"Protocol",params:e},n()(H).trigger(H.startClientSucceededEvent,e),oe.isInstalling&&(n()(H).trigger(H.successfulInstallEvent,e),oe.isInstalling=!1)}function ge(e){return!1}function he(e){var t;oe.protocolDetectionEnabled&&void 0!==navigator.msLaunchUri?navigator.msLaunchUri(e,(function(){}),(function(){})):(0<(t=n()("iframe#gamelaunch")).length&&t.remove(),t=n()("<iframe id='gamelaunch' class='hidden'></iframe>").attr("src",e),n()("body").append(t),t=new Event("ProtocolLaunchStartSelenium"),window.dispatchEvent(t))}function fe(e){var t,o=new(n().Deferred),r=de(e.launchMode),i=oe.protocolUrlSeparator,l="".concat(e.protocolName,":"),c=[];return c.push(1),c.push("launchmode:".concat(e.launchMode)),!e.gameInfo||e.protocolName===oe.protocolNameForStudio&&0===e.gameInfo.indexOf("Guest:")||c.push("gameinfo:".concat(encodeURIComponent(e.gameInfo))),oe.protocolUrlIncludesLaunchTime&&c.push("launchtime:".concat(e.launchTime)),"True"===a.PlaceLauncher.Resources.IsProtocolHandlerBaseUrlParamEnabled&&(t=a.EnvironmentUrls.websiteUrl||"https://".concat(window.location.host),c.push("baseUrl:".concat(encodeURIComponent(t)))),r&&a.CurrentUser.isAuthenticated&&(c.push("distributorType:".concat(re)),c.push("userId:".concat(a.CurrentUser.userId))),r&&c.push("browser:".concat((0,g.getCurrentBrowser)())),n().each(e.otherParams,(function(e,t){e===t?c.push(e):c.push("".concat(e,":").concat(encodeURIComponent(t)))})),l+=c.join(i),H.gameLaunchLogger&&H.gameLaunchLogger.logToConsole("launchProtocolUrl: ".concat(JSON.stringify({url:l,params:e}))),he(l),o.resolve(e),o}function be(e){return n().when((t=e,o=new(n().Deferred),e=de(t.launchMode),r=ae({},t),!a.CurrentUser.isAuthenticated||e?(o.resolve(r),o):oe.doAuthTicketRequest().then((function(e,t,n){return(n=n.getResponseHeader("RBX-Authentication-Ticket"))&&0<n.length?(r.gameInfo=n,o.resolve(r)):o.reject(),o}))),(e=a.Endpoints.getAbsoluteUrl("/client-status/set?status=Unknown"),n().ajax({method:"POST",url:e}))).then(fe,pe).then(me).then(ve,ge);var t,o,r}function ye(e){return n()(this).hasClass("disabled")||(be(e.data),void 0===(e=n()("#ProtocolHandlerClickAlwaysAllowed")).data("hideRememberOverlay")&&e.show()),!1}function we(e){return(e=ae({},e)).launchTime=(new Date).getTime(),e.otherParams.browsertrackerid=a.Cookies.getBrowserTrackerId(),e.otherParams.robloxLocale=oe.robloxLocale,e.otherParams.gameLocale=oe.gameLocale,e.otherParams.channel=oe.channel,e.protocolName===oe.protocolNameForStudio?e.otherParams.channel=oe.studioChannel:e.otherParams.channel=oe.playerChannel,oe.isDuarAutoOptInEnabled&&e.protocolName===oe.protocolNameForClient&&!e.otherParams.LaunchExp&&(oe.isDuarOptOutDisabled?e.otherParams.LaunchExp="InApp":e.otherParams.LaunchExp="PreferInApp"),n()(H).trigger(H.startClientAttemptedEvent,{launchMethod:"Protocol",params:e}),ue((function(){}),e),be(e)}function Ie(e,t){var o=" ";return a.Endpoints&&a.Endpoints.Urls&&(o="".concat(a.Endpoints.getAbsoluteUrl("/Game/PlaceLauncher.ashx"),"?")),"h"!==o[0]&&(o="http://".concat(window.location.host)+"/Game/PlaceLauncher.ashx?"),o=o.replace("placelauncher","PlaceLauncher"),e={request:e,browserTrackerId:a.Cookies.getBrowserTrackerId()},n().extend(e,t),o+n().param(e)}function Pe(e,t,o){return r="Edit.ashx",i=e,e=t,t=o,o=" ",a.Endpoints&&a.Endpoints.Urls&&(o="".concat(a.Endpoints.getAbsoluteUrl("/Game/".concat(r)),"?")),"h"!==o[0]&&(o="http://".concat(window.location.host)+"/Game/".concat(r,"?")),e={placeId:i,upload:t?i:"",universeId:e,testMode:!1},o+n().param(e);var r,i}function Ce(){document.getElementById("downloadInstallerIFrame").src="/download/client"}function Ee(e){var t=de(e.launchMode);n().modal.close(),t||(a.Dialog.open({titleText:n()("#InstallationInstructions .ph-modal-header .title").text(),allowHtmlContentInBody:!0,bodyContent:n()("#InstallationInstructions .modal-content-container").html(),allowHtmlContentInFooter:!0,footerText:n()("#InstallationInstructions .xsmall").html(),acceptColor:a.Dialog.none,declineColor:a.Dialog.none,cssClass:"install-instructions-modal",xToCancel:!0,onCloseCallback:function(){n()("#ProtocolHandlerClickAlwaysAllowed").hide()}}),0===n()("#GameLaunchInstructionsLinkScript").length&&oe.attachManualDownloadToLink(),setTimeout((function(){n()(".VisitButtonContinueGLI a").removeClass("disabled").click(e,ye)}),5e3)),function(e,t){var a=ae({},e);e=a.gameInfo,void 0!==a.gameInfo&&(a.gameInfo=void 0),n()(H).trigger(H.beginInstallEvent,{launchMethod:"Protocol",params:a}),oe.isInstalling=!0,a.url=window.location.href,void 0!==e&&(a.gameInfo=e),t?document.getElementById("downloadInstallerIFrame").src="/download/studio":Ce()}(e,t)}function Le(){n()(H).trigger(H.manualDownloadEvent,{launchMethod:"Protocol",params:{}}),Ce()}Object.assign(oe,{joinMultiplayerGame:function(e){var t=oe.protocolNameForClient,n=Ie("RequestGame",e),a=!0===e.isPlayTogetherGame;return we({protocolName:t,launchMode:"play",otherParams:{placelauncherurl:n},placeId:e.placeId,isPlayTogetherGame:a})},openStudio:function(){var e={};return oe.avatarParamEnabled&&(e.avatar="avatar"),we({protocolName:oe.protocolNameForStudio,launchMode:"edit",otherParams:e})},tryAssetInStudio:function(e){return e={assetid:e},oe.avatarParamEnabled&&(e.avatar="avatar"),we({protocolName:oe.protocolNameForStudio,launchMode:"asset",otherParams:e})},openPluginInStudio:function(e){e={pluginid:e},oe.avatarParamEnabled&&(e.avatar="avatar"),we({protocolName:oe.protocolNameForStudio,launchMode:"plugin",otherParams:e})},editGameInStudio:function(e,t,n){n=oe.separateScriptParamsEnabled?{task:"EditPlace",placeId:e,universeId:t}:{script:Pe(e,t,n)},oe.avatarParamEnabled&&(n.avatar="avatar"),we({protocolName:oe.protocolNameForStudio,launchMode:"edit",otherParams:n,placeId:e})},followPlayerIntoGame:function(e){return we({protocolName:oe.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:Ie("RequestFollowUser",e)}})},joinGameInstance:function(e){var t=oe.protocolNameForClient,n=Ie("RequestGameJob",e),a=!0===e.isPlayTogetherGame;return we({protocolName:t,launchMode:"play",otherParams:{placelauncherurl:n},placeId:e.placeId,isPlayTogetherGame:a})},joinPrivateGame:function(e){return we({protocolName:oe.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:Ie("RequestPrivateGame",e)},placeId:e.placeId})},playTogetherGame:function(e){return we({protocolName:oe.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:Ie("RequestPlayTogetherGame",e)},placeId:e.placeId,conversationId:e.conversationId})},manualDownload:Le,attachManualDownloadToLink:function(){n()("body #GameLaunchManualInstallLink").click((function(){return Le(),!1}))},startDownload:Ce,setLocationHref:he,doAuthTicketRequest:function(){var e="".concat(a.EnvironmentUrls.authApi,"/v1/authentication-ticket/");return n().ajax({method:"POST",url:e,contentType:"application/json"})},openDesktopUniversalApp:function(){var e={},t=oe.protocolNameForClient;return e.protocolName=t,e.launchTime=(new Date).getTime(),e.launchMode=ce,e.otherParams={},e.otherParams.browsertrackerid=a.Cookies.getBrowserTrackerId(),e.otherParams.robloxLocale=oe.robloxLocale,e.otherParams.gameLocale=oe.gameLocale,e.otherParams.LaunchExp="InApp",n()(H).trigger(H.startClientAttemptedEvent,{launchMethod:"Protocol",params:e}),ue((function(){}),e),be(e)},showDialog:ue,showLaunchFailureDialog:pe,cleanUpAndLogSuccess:ve,cleanUpAndLogFailure:ge,startGameWithDeepLinkUrl:function(e,t){ue((function(){}),{launchMode:"play",protocolName:oe.protocolNameForClient,placeId:t}),he(e),setTimeout((function(){n().modal.close()}),6e4)}}),n()(document).ready((function(){H.setGameLaunchInterface(oe);var e=n()("#PlaceLauncherStatusPanel");oe.protocolNameForClient=e.data("protocol-name-for-client"),oe.protocolNameForStudio=e.data("protocol-name-for-studio"),oe.protocolUrlIncludesLaunchTime=e.data("protocol-url-includes-launchtime"),oe.protocolDetectionEnabled=e.data("protocol-detection-enabled"),oe.separateScriptParamsEnabled=e.data("protocol-separate-script-parameters-enabled"),oe.avatarParamEnabled=e.data("protocol-avatar-parameter-enabled"),oe.isJoinAttemptIdEnabled="True"===(null!==(t=e.data("is-join-attempt-id-enabled"))&&void 0!==t?t:"False"),oe.robloxLocale=e.data("protocol-roblox-locale"),oe.gameLocale=e.data("protocol-game-locale");var t=e.data("protocol-channel-name");"string"==typeof t&&"LIVE"!==t.toUpperCase()&&(oe.channel=t),"string"==typeof(t=e.data("protocol-studio-channel-name"))&&"LIVE"!==t.toUpperCase()&&(oe.studioChannel=t),"string"==typeof(t=e.data("protocol-player-channel-name"))&&"LIVE"!==t.toUpperCase()&&(oe.playerChannel=t),oe.logger||void 0===window.Roblox.ProtocolHandlerLogger||(oe.logger=window.Roblox.ProtocolHandlerLogger),oe.isDuarAutoOptInEnabled=e.data("is-duar-auto-opt-in-enabled"),oe.isDuarOptOutDisabled=e.data("is-duar-opt-out-disabled")}));var Se=oe,Ae=React,Te=e.n(Ae),De=CoreRobloxUtilities,Ge=function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))},xe=function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Re=De.dataStores.gamesDataStore,Oe=function(e){return Ge(void 0,void 0,Promise,(function(){var t;return xe(this,(function(n){switch(n.label){case 0:return[4,Re.getProductInfo(e)];case 1:return[2,(void 0===(t=n.sent().data.data)?[]:t)[0]]}}))}))},Ue=function(e){return Ge(void 0,void 0,Promise,(function(){var t;return xe(this,(function(n){switch(n.label){case 0:return[4,Re.getPlaceDetails(e)];case 1:return[2,(void 0===(t=n.sent().data)?[]:t)[0]]}}))}))},ke=function(e){return Ge(void 0,void 0,Promise,(function(){var t;return xe(this,(function(n){switch(n.label){case 0:return[4,Re.getPlayabilityStatus(e)];case 1:return[2,(void 0===(t=n.sent().data)?[]:t)[0]]}}))}))},Be=function(e){return Ge(void 0,void 0,Promise,(function(){var t;return xe(this,(function(n){switch(n.label){case 0:return t={withCredentials:!0,url:a.EnvironmentUrls.voiceApi+"/v1/settings/verify/show-age-verification-overlay/"+e},[4,g.httpService.get(t)];case 1:return[2,n.sent().data]}}))}))},Me=function(){return Ge(void 0,void 0,Promise,(function(){var e;return xe(this,(function(t){switch(t.label){case 0:return e={withCredentials:!0,url:a.EnvironmentUrls.apiGatewayUrl+"/universal-app-configuration/v1/behaviors/play-button-ui/content"},[4,g.httpService.get(e)];case 1:return[2,t.sent().data]}}))}))},je=function(){return(je=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ne={UnplayableOtherReason:"UnplayableOtherReason",Playable:"Playable",GuestProhibited:"GuestProhibited",GameUnapproved:"GameUnapproved",IncorrectConfiguration:"IncorrectConfiguration",UniverseRootPlaceIsPrivate:"UniverseRootPlaceIsPrivate",InsufficientPermissionFriendsOnly:"InsufficientPermissionFriendsOnly",InsufficientPermissionGroupOnly:"InsufficientPermissionGroupOnly",DeviceRestricted:"DeviceRestricted",UnderReview:"UnderReview",PurchaseRequired:"PurchaseRequired",AccountRestricted:"AccountRestricted",TemporarilyUnavailable:"TemporarilyUnavailable",ComplianceBlocked:"ComplianceBlocked",ContextualPlayabilityRegionalAvailability:"ContextualPlayabilityRegionalAvailability",ContextualPlayabilityRegionalCompliance:"ContextualPlayabilityRegionalCompliance",ContextualPlayabilityAgeRecommendationParentalControls:"ContextualPlayabilityAgeRecommendationParentalControls",ContextualPlayabilityAgeGated:"ContextualPlayabilityAgeGated",PlaceHasNoPublishedVersion:"PlaceHasNoPublishedVersion"},Fe={playButtonTranslationMap:((et={})[Ne.UnplayableOtherReason]="Response.GameTemporarilyUnavailable",et[Ne.TemporarilyUnavailable]="Response.GameTemporarilyUnavailable",et[Ne.GameUnapproved]="Label.GameUnavailablePlaceUnderReview",et[Ne.IncorrectConfiguration]="Response.GameTemporarilyUnavailable",et[Ne.UniverseRootPlaceIsPrivate]="Label.GameUnavailableCurrentlyIsPrivateVisitor",et[Ne.InsufficientPermissionFriendsOnly]="Label.GameUnavailablePermissionLevels",et[Ne.InsufficientPermissionGroupOnly]="Label.GameUnavailablePermissionLevels",et[Ne.DeviceRestricted]="Response.GameTemporarilyUnavailable",et[Ne.UnderReview]="Label.GameUnavailablePlaceUnderReview",et[Ne.AccountRestricted]="Label.GameUnavailableAccountResrictions",et[Ne.ComplianceBlocked]="Label.ComplianceBlocked",et[Ne.ContextualPlayabilityRegionalAvailability]="Label.ContextualPlayabilityRegionalAvailability",et[Ne.ContextualPlayabilityRegionalCompliance]="Label.ContextualPlayabilityRegionalCompliance",et[Ne.ContextualPlayabilityAgeRecommendationParentalControls]="Label.ContextualPlayabilityAgeRecommendationParentalControls",et[Ne.ContextualPlayabilityAgeGated]="Label.ContextualPlayabilityAgeGated",et[Ne.PlaceHasNoPublishedVersion]="Label.GameUnavailableRootPlaceIsUnpublished",et),eventStreamProperties:function(e,t){return{eventName:"playGameClicked",ctx:"click",properties:je(je({},t),{placeId:e}),gamePlayIntentEventCtx:"PlayButton"}},PlayabilityStatus:Ne},Ve=function(e){function t(){return function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t;return function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){switch(n.label){case 0:o(void 0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ke([e])];case 2:return t=n.sent(),o(t.playabilityStatus),[3,4];case 3:return n.sent(),o(Ne.TemporarilyUnavailable),[3,4];case 4:return[2]}}))}))}var n=(0,Ae.useState)(void 0),a=n[0],o=n[1];return(0,Ae.useEffect)((function(){t()}),[]),[a,t]},_e=HeaderScripts,He=function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))},qe=function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function Je(e,t){void 0===t&&(t={});var n=a.EnvironmentUrls.websiteUrl+"/games/start?placeid="+e;return a.GameLauncher.isJoinAttemptIdEnabled()&&(e=t.joinAttemptOrigin,0<(null==(t="string"==typeof(t=t.joinAttemptId)?t:g.uuidService.generateRandomUuid())?void 0:t.length)&&(n+="&joinAttemptId="+t,"string"==typeof e&&0<e.length&&(n+="&joinAttemptOrigin="+e))),encodeURIComponent(n)}function ze(e,t,n,a,o){void 0===o&&(o={});var r=_e.deviceMeta.getDeviceMeta();null!=r&&r.isIosDevice||null!=r&&r.isAndroidDevice||_e.jsClientDeviceIdentifier.isIos13Ipad?(r=Je(e,o),window.open("https://ro.blox.com/Ebh5?pid=share&is_retargeting=true&af_dp="+r+"&af_web_dp="+r,"_self")):De.playGameService.launchGame(De.playGameService.buildPlayGameProperties(t,e,a,void 0,n),Fe.eventStreamProperties(e,o))}function We(e){var t=_e.deviceMeta.getDeviceMeta();null!=t&&t.isIosDevice||null!=t&&t.isAndroidDevice||_e.jsClientDeviceIdentifier.isIos13Ipad?(t=Je(e),window.open("https://ro.blox.com/Ebh5?pid=share&is_retargeting=true&af_dp="+t+"&af_web_dp="+t,"_self")):De.playGameService.launchGame(De.playGameService.buildPlayGameProperties(void 0,e.toString()),Fe.eventStreamProperties(e,{}))}function Xe(){return He(void 0,void 0,Promise,(function(){return qe(this,(function(e){try{return[2,a.IdentityVerificationService.startVerificationFlow()]}catch(e){return[2,[!1,!1]]}return[2]}))}))}function Ke(e,t){return He(void 0,void 0,Promise,(function(){return qe(this,(function(n){try{return[2,a.IdentityVerificationService.showVoiceOptInOverlay(e,t)]}catch(n){return[2,!1]}return[2]}))}))}function Ye(e){var t=e.universeId,n=e.placeId,a=e.rootPlaceId,o=e.privateServerLinkCode,r=e.gameInstanceId,i=e.status,l=e.eventProperties,c=void 0===l?{}:l,s=(e=void 0===(l=e.iconClassName)?"icon-common-play":l,(l=(0,Ae.useState)(void 0))[0]),d=l[1],u=(l=(0,Ae.useState)(void 0))[0],p=l[1],m=(l=(0,Ae.useState)(void 0))[0],v=l[1],g=(l=(0,Ae.useState)(void 0))[0],h=l[1];return(0,Ae.useEffect)((function(){nt(void 0,void 0,void 0,(function(){var e;return at(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(a=t,nt(void 0,void 0,Promise,(function(){var e,t,n,o,r,i;return at(this,(function(l){switch(l.label){case 0:return _e.authenticatedUser.isAuthenticated?[4,Me()]:[2,{showAgeVerificationOverlay:!1,showVoiceOptInOverlay:!1,requireExplicitVoiceConsent:!0,useExitBetaLanguage:!1}];case 1:return r=l.sent(),e=r.playButtonOverlayWebFlag,t=r.voiceOptInWebFlag,n=r.requireExplicitVoiceConsent,o=r.useExitBetaLanguage,e||t?[4,Be(a)]:[2,{showAgeVerificationOverlay:!1,showVoiceOptInOverlay:!1,requireExplicitVoiceConsent:n,useExitBetaLanguage:o}];case 2:return i=l.sent(),r=i.showAgeVerificationOverlay,i=i.showVoiceOptInOverlay,[2,{showAgeVerificationOverlay:e&&r,showVoiceOptInOverlay:t&&i,requireExplicitVoiceConsent:n,useExitBetaLanguage:o}]}}))})))];case 1:return e=n.sent(),d(e.showAgeVerificationOverlay),p(e.showVoiceOptInOverlay),v(e.requireExplicitVoiceConsent),h(e.useExitBetaLanguage),[3,3];case 2:return e=n.sent(),console.error(e),d(!1),p(!1),h(!1),[3,3];case 3:return[2]}var a}))}))}),[]),void 0===s?Te().createElement(Qe.Loading,null):Te().createElement(Te().Fragment,null,Te().createElement(Qe.Button,{"data-testid":"play-button",className:"btn-full-width btn-common-play-game-lg",onClick:function(e){return nt(void 0,void 0,void 0,(function(){var t;return at(this,(function(l){switch(l.label){case 0:return e.preventDefault(),e.stopPropagation(),i!==it.Playable?[3,5]:s?[4,Xe()]:[3,2];case 1:return(t=l.sent())[0],t[1]&&d(!1),[3,4];case 2:return u?[4,Ke(null==m||m,null!=g&&g)]:[3,4];case 3:l.sent()&&p(!1),l.label=4;case 4:return ze(n,a,o,r,c),[3,6];case 5:i===it.GuestProhibited&&We(n),l.label=6;case 6:return[2]}}))}))}},Te().createElement("span",{className:e})),Te().createElement("div",{id:"id-verification-container"}))}var Qe=ReactStyleGuide,Ze=RobloxItemPurchase,$e=(t=ReactUtilities,RobloxThumbnails),et={common:["Common.VisitGame"],feature:""},tt=function(){return(tt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},nt=function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))},at=function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ot=(Ze=(0,Ze.createItemPurchase)())[0],rt=Ze[1],it=Fe.PlayabilityStatus,lt=(0,t.withTranslations)((function(e){var t=e.translate,n=e.universeId,a=e.placeId,o=void 0===(i=e.iconClassName)?"icon-robux-white":i,r=e.refetchPlayabilityStatus,i=(c=(0,Ae.useState)(void 0))[0],l=c[1],c=(e=(0,Ae.useState)(void 0))[0],s=e[1];return(0,Ae.useEffect)((function(){nt(void 0,void 0,void 0,(function(){var e;return at(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Oe([n])];case 1:return e=t.sent(),l(e),[3,3];case 2:return e=t.sent(),console.log(e),[3,3];case 3:return[2]}}))})),nt(void 0,void 0,void 0,(function(){var e;return at(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Ue([a])];case 1:return e=t.sent(),s(e),[3,3];case 2:return e=t.sent(),console.log(e),[3,3];case 3:return[2]}}))}))}),[]),void 0===i||void 0===c?Te().createElement(Qe.Loading,null):Te().createElement(Te().Fragment,null,Te().createElement(Qe.Button,{"data-testid":"play-purchase-button",className:"btn-full-width btn-common-play-game-lg",onClick:function(e){e.preventDefault(),e.stopPropagation(),rt.start()}},Te().createElement("span",{className:o}),Te().createElement("span",{className:"btn-text"},i.price)," "),Te().createElement(ot,tt({},{translate:t,productId:i.productId,expectedPrice:i.price,thumbnail:Te().createElement($e.Thumbnail2d,{type:$e.ThumbnailTypes.gameIcon,size:$e.DefaultThumbnailSize,targetId:parseInt(n,10),imgClassName:"game-card-thumb",format:$e.ThumbnailFormat.jpeg}),assetName:c.name,assetType:"Place",sellerName:c.builder,expectedCurrency:1,expectedSellerId:i.sellerId,onPurchaseSuccess:r,isPlace:!0})))}),et),ct=(0,t.withTranslations)((function(e){var t=e.translate;e=e.playabilityStatus;return Te().createElement("span",{"data-testid":"play-error",className:"error-message"},t(Fe.playButtonTranslationMap[e]))}),et);Ve={usePlayabilityStatus:Ve,PlayabilityStatuses:Ne,launchGame:ze,launchLogin:We,DefaultPlayButton:function(e){var t=e.placeId,n=e.rootPlaceId,a=e.universeId,o=e.privateServerLinkCode,r=e.gameInstanceId,i=e.refetchPlayabilityStatus,l=e.playabilityStatus,c=void 0===(e=e.eventProperties)?{}:e;switch(l){case void 0:return Te().createElement(Qe.Loading,null);case it.Playable:case it.GuestProhibited:return Te().createElement(Ye,{universeId:a,placeId:t,rootPlaceId:n,privateServerLinkCode:o,gameInstanceId:r,status:l,eventProperties:c});case it.PurchaseRequired:return Te().createElement(lt,{refetchPlayabilityStatus:i,universeId:a,placeId:t});default:return Te().createElement(ct,{playabilityStatus:l})}},PlayButton:Ye,PurchaseButton:lt,Error:ct};window.Roblox||(window.Roblox={}),Object.assign(window.Roblox,{AuthenticationChecker:v,GameLauncher:H,GameLaunchLogger:te,GamePlayEvents:z,PrerollPlayer:O,ProtocolHandlerClientInterface:Se,VideoPreRollDFP:R,PlayButton:Ve}),n()(document).ready((function(){!function(){var e="click";n()("body").on(e,".VisitButtonPlay, .VisitButtonPlayGLI",(function(){var e,t,o,r,i,l=n()(this);(l.hasClass("VisitButtonPlay")||l.hasClass("VisitButtonPlayGLI"))&&(e="PlayButton"),e&&(t=n()(this).attr("placeid"),o=n()(this).data("universe-id"),i=n()(this).data("user-id"),r=n()(this).data("originator-type"),l=n()(this).data("originator-id"),"GameUpdateNotification"===r&&n().ajax({url:"".concat(a.EnvironmentUrls.notificationApi,"/v2/stream-notifications/game-update-notification-interacted"),type:"POST",data:{universeId:o,createdOn:new Date(l),interactionType:"Played",currentUserId:i}}),i=a.UrlParser?a.UrlParser.getParameterValueByName("rbxp"):null,z.SendGamePlayIntent(e,t,i))})),n()("body").on(e,".VisitButtonEdit, .VisitButtonEditGLI",(function(){var e=n()(this).attr("placeid");z.SendDevelopIntent("Edit",e)})),n()("#rbx-running-games").on(e,".rbx-game-server-item .rbx-game-server-join",(function(){var e=n()(this).data("placeid");e&&z.SendGamePlayIntent("JoinInstance",e)})),n()("#rbx-friends-running-games").on(e,".rbx-friends-game-server-item .rbx-friends-game-server-join",(function(){var e=n()(this).data("placeid");e&&z.SendGamePlayIntent("JoinInstance",e)})),n()("#game-instances").on(e,"#rbx-vip-servers .rbx-vip-server-item .rbx-vip-server-join",(function(){var e=n()(this).data("placeid");e&&z.SendGamePlayIntent("PrivateServer",e)})),n()("#build-page").on(e,".roblox-edit-button",(function(){var e;(e=(e=n()(this).parents("table.item-table")).data("rootplace-id")||e.data("item-id"))&&z.SendDevelopIntent("Edit",e)}))}();var e=(0,a.DeviceMeta)();(e.isUWPApp||e.isUniversalApp)&&(window.Roblox.AppHybridClientInterface=l,H.setGameLaunchInterface(l)),H.setGameLaunchLogger(te)}))}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("GameLaunch");