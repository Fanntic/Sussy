!function(){"use strict";function e(){return p(void 0,void 0,Promise,(function(){var e;return h(this,(function(n){switch(n.label){case 0:return e={url:e=d.EnvironmentUrls.apiGatewayUrl+"/hba-service/v1/getServerNonce",withCredentials:!0},[4,u.httpService.get(e)];case 1:return[2,n.sent().data]}}))}))}function n(n){return v(void 0,void 0,Promise,(function(){var t,r,o,a,i;return g(this,(function(c){switch(c.label){case 0:return b().isSecureAuthenticationIntentEnabled?[4,null===d.ExperimentationService||void 0===d.ExperimentationService?void 0:d.ExperimentationService.getAllValuesForLayer("Account.HardwareBackendAuth")]:[2,{authParams:n}];case 1:if(!c.sent()[m])return[2,{authParams:n}];c.label=2;case 2:return c.trys.push([2,7,,8]),[4,e()];case 3:return(t=c.sent())?[4,f.cryptoUtil.generateSigningKeyPairUnextractable()]:(console.warn("No hba server nonce available."),[2,{authParams:n}]);case 4:return r=c.sent(),[4,f.cryptoUtil.exportPublicKeyAsSpki(r.publicKey)];case 5:return o=c.sent(),a=Math.floor(Date.now()/1e3),i=[o,a,t].join("|"),[4,f.cryptoUtil.sign(r.privateKey,i)];case 6:return i=c.sent(),i={clientPublicKey:o,clientEpochTimestamp:a,serverNonce:t,saiSignature:i},n.secureAuthenticationIntent=i,[2,{authParams:n,clientKeyPair:r}];case 7:return c.sent(),[2,{authParams:n}];case 8:return[2]}}))}))}function t(e,n){return y(void 0,void 0,Promise,(function(){var t;return w(this,(function(r){switch(r.label){case 0:return E&&S?(t=C.getOrCreateCryptoDB(E,S),[4,C.putCryptoKeyPair(e,n,t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}var r,o,a={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,{a:n}),n},d:function(e,n){for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}},i=React,c=a.n(i),l=ReactDOM,u=CoreUtilities,s=ReactUtilities,d=Roblox,f=CoreRobloxUtilities,p=function(e,n,t,r){return new(t=t||Promise)((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):((n=e.value)instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},h=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},m="isHBADarkLaunchEnabled",v=function(e,n,t,r){return new(t=t||Promise)((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):((n=e.value)instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},g=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},b=f.cryptoUtil.getHbaMeta,y=function(e,n,t,r){return new(t=t||Promise)((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):((n=e.value)instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},w=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},E=(o=(0,f.cryptoUtil.getHbaMeta)()).hbaIndexedDBName,S=o.hbaIndexedDBObjStoreName,C=f.dataStores.hbacIndexedDB,T="Action.SignUpCapitalized",k="Action.LogInCapitalized",I="Action.AnotherLoggedInDevice",A="Action.ForgotPasswordOrUsernameQuestionCapitalized",P="Action.LogInEmailOneTimeCode",x="Action.LogInAnotherDevice",L="Description.CurfewMessage",U="Description.AccountSelectorHelp",O="Description.EnterOneTimeCodeHelp",N="Description.GetOneTimeCodeHelp",D="Heading.LoginRoblox",R="Label.EnterOneTimeCode",M="Label.GetOneTimeCode",V="Label.NoAccount",F="Label.Password",B="Label.UsernameEmailPhone",W="Label.LoginWithYour",Q="Label.AccountSelectorTitle",j="Message.UnknownErrorTryAgain",G="Message.UsernameAndPasswordRequired",K="Response.AccountNotFound",q="Response.AccountIssueErrorContactSupport",H="Response.TooManyAttemptsPleaseWait",_="Response.CaptchaErrorFailedToLoad",z="Response.CaptchaErrorFailedToVerify",J="Response.GlobalAppAccessError",Y="Response.IncorrectCredentialsForgotPasswordMessage",$="Response.IncorrectEmailOrPassword",X="Response.IncorrectPhoneOrPassword",Z="Response.IncorrectUsernamePassword",ee="Response.EmailLinkedToMultipleAccountsLoginWithUsername",ne="Response.LoginWithUsername",te="Response.UnverifiedEmailLoginWithUsername",re="Response.UnverifiedPhoneLoginWithUsername",oe="Response.VerificationError",ae={securityNotification:d.EnvironmentUrls.websiteUrl+"/login/securityNotification",koreaIdVerification:d.EnvironmentUrls.websiteUrl+"/id-verification/korea/login",forgotCredentialsUrl:d.EnvironmentUrls.websiteUrl+"/login/forgot-password-or-username"},ie="otp-login-container",ce="DefaultLoginRequired",le="UnknownError",ue={common:["Common.Captcha"],feature:"Authentication.Login"};function se(e){return d.EnvironmentUrls.authApi+e}function de(e){return d.EnvironmentUrls.apiGatewayUrl+e}function fe(e){f.eventStreamService.sendEventWithTarget(Oe.formInteraction,Ue.context.loginForm,{field:e.field,aType:e.aType})}function pe(){fe({field:Ue.field.username,aType:Ue.aType.focus})}function he(){fe({field:Ue.field.username,aType:Ue.aType.offFocus})}function me(){fe({field:Ue.field.password,aType:Ue.aType.focus})}function ve(){fe({field:Ue.field.password,aType:Ue.aType.offFocus})}function ge(e){window.location.href=e}function be(e){De&&e&&De.fireEvent("WebsiteLogin_"+e)}function ye(e,n){switch(e){case 9:case 10:case 1:return function(e,n){switch(e){case 1:return n===r.Email?$:n===r.PhoneNumber?X:n===r.EmailOtpSessionToken?Y:Z;case 9:return n===r.Email?ee:n===r.PhoneNumber?ne:"";case 10:return n===r.Email?te:n===r.PhoneNumber?re:"";default:return""}}(e,n);case 3:return K;case 6:return q;case 7:return H;case 11:return _;case 12:return z;case 14:return J;case 13:return j;case 16:return L;default:return j}}function we(e){return n=e,new RegExp("^\\w+([-_+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$").test(n)?r.Email:!(e=e)||e.length<4||!/\d/.test(e)||!/^[\d|\W|_]+$/.test(e)?r.Username:r.PhoneNumber;var n}function Ee(){var e=function(e){if(!e)return"/";var n=e;return-1<e.indexOf(Re)?n+=Me:n+=Re,n+"nl=true"}((null==(e=Ne())?void 0:e.getAttribute("data-return-url"))||"");return u.urlService.getAbsoluteUrl(e)}function Se(e){var n=[];return e&&"object"==typeof e&&(e=e.errors)instanceof Array?(e.forEach((function(e){!e||"object"!=typeof e||"number"==typeof(e=e.code)&&n.push(e)})),n):[]}function Ce(e){var n=[];return e&&"object"==typeof e&&(e=e.errors)instanceof Array?(e.forEach((function(e){!e||"object"!=typeof e||"string"==typeof(e=e.fieldData)&&n.push(e)})),n):[]}function Te(e){var n=e.containerId,t=e.actionType,r=e.dataExchange,o=e.unifiedCaptchaId,a=e.onCaptchaChallengeCompleted,l=e.onCaptchaChallengeInvalidated,u=e.onCaptchaChallengeAbandoned,s=e.onUnknownError,d=(e=(0,i.useState)(null))[0],f=e[1];return(0,i.useEffect)((function(){var e;r&&o&&(e={dataExchange:r,unifiedCaptchaId:o},null===d?(e={containerId:n,actionType:t,appType:null,dataExchangeBlob:e.dataExchange,unifiedCaptchaId:e.unifiedCaptchaId,shouldDynamicallyLoadTranslationResources:!1,onChallengeDisplayed:function(e){return null},onChallengeCompleted:function(e){f(null),a(e)},onChallengeInvalidated:function(e){f(null),l(e)},renderInline:!1,onModalChallengeAbandoned:function(e){return f((function(){return e})),u(),null}},We?We.renderChallenge(e).then((function(e){e||s()})).catch((function(){s()})):console.error("no captcha service available")):d())}),[r+o]),c().createElement("div",{id:n})}function ke(e){var n=e.userId,t=e.challengeId,r=e.on2svChallengeCompleted,o=e.on2svChallengeInvalidated,a=e.on2svChallengeAbandoned,l=e.onUnknownError,u="react-2sv-container";return(0,i.useEffect)((function(){n&&t&&Qe.renderChallenge({containerId:u,userId:n,challengeId:t,actionType:Qe.ActionType.Login,renderInline:!1,shouldShowRememberDeviceCheckbox:!0,shouldDynamicallyLoadTranslationResources:!1,onChallengeCompleted:r,onChallengeInvalidated:o,onModalChallengeAbandoned:a}).then((function(e){e||l()})).catch((function(){l()}))}),[n,t]),c().createElement("div",{id:u})}function Ie(){var e=ae.koreaIdVerification;window.location.href=e}function Ae(e){var n=e.userId,t=e.sessionId,r=e.onSecurityQuestionsChallengeCompleted,o=e.onSecurityQuestionsChallengeInvalidated,a=e.onSecurityQuestionsChallengeAbandoned,l=e.onUnknownError,u="react-security-questions-container";return(0,i.useEffect)((function(){n&&t&&Ke.renderChallenge({containerId:u,userId:n,sessionId:t,renderInline:!1,shouldDynamicallyLoadTranslationResources:!1,onChallengeCompleted:r,onChallengeInvalidated:o,onModalChallengeAbandoned:a}).then((function(e){e||l()})).catch((function(){l()}))}),[n,t]),c().createElement("div",{id:u})}function Pe(e){var n=e.containerId,t=e.users,r=e.onAccountSelection,o=e.onAccountSelectorAbandoned,a=e.titleText,l=(e=e.helpText,{containerId:n,users:t,onAccountSelection:r,onAccountSelectorAbandoned:o,titleText:a,helpText:e});return(0,i.useEffect)((function(){0<t.length&&d.AccountSelectorService&&d.AccountSelectorService.renderAccountSelectorModal(l)}),[t]),c().createElement("div",{id:n})}(o=r=r||{}).Username="Username",o.Email="Email",o.PhoneNumber="PhoneNumber",o.AuthToken="AuthToken",o.EmailOtpSessionToken="EmailOtpSessionToken",(o={}).Email="Email",o.Authenticator="Authenticator",o.RecoveryCode="RecoveryCode";var xe=function(e,n,t,r){return new(t=t||Promise)((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):((n=e.value)instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},Le=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Ue={eventName:{loginOtherDevice:"loginOtherDevice",formValidation:"formValidation"},context:{loginPage:"loginPage",loginForm:"LoginForm",landingPage:"Multiverse",signupForm:"MultiverseSignupForm",sendOTP:"sendOTP",enterOTP:"enterOTP",disambiguationOTP:"disambiguationOTP",disambiguationEmail:"disambiguationEmail",disambiguationPhone:"disambiguationPhone"},aType:{buttonClick:"buttonClick",click:"click",offFocus:"offFocus",focus:"focus",shown:"shown"},field:{loginOtherDevice:"loginOtherDevice",loginOTP:"loginOTP",loginSubmitButtonName:"loginSubmit",password:"password",username:"username",signupSubmitButtonName:"signupSubmit",appButtonClickName:"AppLink",showPassword:"showPassword",hidePassword:"hidePassword",birthdayDay:"birthdayDay",birthdayMonth:"birthdayMonth",birthdayYear:"birthdayYear",signupUsername:"signupUsername",signupPassword:"signupPassword",signupEmail:"signupEmail",parentEmail:"parentEmail",genderMale:"genderMale",genderFemale:"genderFemale",email:"email",otpCode:"OTPcode",errorMessage:"errorMessage",accountSelection:"accountSelection"},btn:{cancel:"cancel",sendCode:"sendCode",resendCode:"resendCode",login:"login"},input:{redacted:"[Redacted]"},origin:{webVerifiedSignup:"WebVerifiedSignup"}},Oe=f.eventStreamService.eventTypes,Ne=function(){return document.getElementById("react-login-container")},De=window.EventTracker,Re="?",Me="&",Ve=function(e){var n=Se(e);return"object"==typeof e&&Se(e.data).forEach((function(e){return n.push(e)})),n[0]||null},Fe=ReactStyleGuide,Be=(0,s.withTranslations)((function(e){var n=e.captchaId,t=e.captchaToken,r=e.credentialValue,o=e.password,a=e.isLoading,l=e.errorMsg,u=e.translate,s=e.onFormSubmit,d=e.onCredentialValueChange,f=e.onPasswordChange;return(0,i.useEffect)((function(){n&&t&&s(!1)}),[n+t]),c().createElement("div",{id:"login-form"},c().createElement("div",null,c().createElement("div",{className:"login-form-container"},c().createElement("form",{className:"login-form",name:"loginForm",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},c().createElement("div",{className:"form-group username-form-group"},c().createElement("label",{htmlFor:"login-username",className:"sr-only"},u(B)),c().createElement("input",{id:"login-username",name:"username",type:"text",className:"form-control input-field",onFocus:pe,onBlur:he,placeholder:u(B),value:r,onChange:function(e){return d(e.target.value)}})),c().createElement("div",{className:"form-group password-form-group"},c().createElement("label",{htmlFor:"login-password",className:"sr-only"},u(F)),c().createElement("input",{id:"login-password",name:"password",type:"password",className:"form-control input-field",onFocus:me,onBlur:ve,placeholder:u(F),value:o,onChange:function(e){return f(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&s()}}),c().createElement("div",{"aria-live":"polite"},0<l.length&&c().createElement("p",{className:"form-control-label xsmall text-error login-error",id:"login-form-error"},l))),a?c().createElement(Fe.Loading,null):c().createElement("button",{type:"button",id:"login-button",className:"btn-full-width login-button btn-secondary-md",onClick:function(e){return s()}},u(k))))))}),ue),We=d.AccountIntegrityChallengeService.Captcha,Qe=d.AccountIntegrityChallengeService.TwoStepVerification,je=(0,s.withTranslations)((function(e){var n=e.shouldRenderCrossDeviceLoginButton,t=e.onCrossDeviceLoginCodeValidated,r=e.isOtpLoginEnabled,o=e.openOtpLoginModal;e=e.translate;return(0,i.useEffect)((function(){function e(e){e.detail&&t(e.detail)}return window.addEventListener("OnCrossDeviceCodeValidated",e),function(){window.removeEventListener("OnCrossDeviceCodeValidated",e)}}),[]),n?c().createElement("div",null,c().createElement("div",{className:"alternative-login-divider-container"},c().createElement("div",{className:"rbx-divider alternative-login-divider"}),!r&&c().createElement("div",{className:"divider-text-container"},c().createElement("span",{className:"divider-text xsmall"},e(W)))),r&&c().createElement("button",{type:"button",id:"otp-login-button",className:"btn-full-width btn-control-md otp-login-button",onClick:o},e(P)),c().createElement("button",{type:"button",id:"cross-device-login-button",className:"btn-full-width btn-control-md cross-device-login-button",onClick:function(){f.eventStreamService.sendEventWithTarget(Oe.formInteraction,Ue.context.loginPage,{field:Ue.field.loginOtherDevice,aType:Ue.aType.click}),d.CrossDeviceLoginDisplayCodeService.openModal()}},c().createElement("span",null,e(r?x:I)))):c().createElement(c().Fragment,null)}),ue),Ge=(0,s.withTranslations)((function(e){var n=e.identityVerificationLoginTicket,t=e.translate,r=(0,Fe.createModal)(),o=(e=r[0],r[1]);return(0,i.useEffect)((function(){(function(e){f.localStorageService.setLocalStorage("identityVerificationLoginTicket",e)})(n),n&&o.open()}),[n]),c().createElement(e,{title:t("Title.VerificationRequired"),body:t("Description.VerificationRequired"),neutralButtonText:t("Action.StartVerification"),onNeutral:Ie,closeable:!1})}),{common:[],feature:"Feature.IdVerification"}),Ke=d.AccountIntegrityChallengeService.SecurityQuestions,qe=(0,s.withTranslations)((function(e){var n=e.translate;e=function(){var e=function(e){return d.UrlParser?(e=d.UrlParser.getParameterValueByName(e,!1))&&encodeURIComponent(e):null}("returnurl");return e?(e={ReturnUrl:e},u.urlService.getUrlWithQueries("/account/signupredir",e)):u.urlService.getAbsoluteUrl("/")}();return c().createElement("div",{className:"text-center"},c().createElement("div",{className:"signup-option"},c().createElement("span",{className:"no-account-text"},n(V)),c().createElement("a",{id:"sign-up-link",className:"text-link signup-link",href:e,target:"_self"},n(T))))}),ue),He=(0,s.withTranslations)((function(e){var n=e.translate;e=ae.forgotCredentialsUrl;return c().createElement("div",{className:"text-center forgot-credentials-link"},c().createElement("a",{id:"forgot-credentials-link",className:"text-link",href:e,target:"_self"},n(A)))}),ue),_e=function(e,n,t,r){return new(t=t||Promise)((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):((n=e.value)instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},ze=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Je=(0,s.withTranslations)((function(e){function o(e){return Boolean(null==e?void 0:e.identityVerificationLoginTicket)}function a(e){Xe(e.identityVerificationLoginTicket)}function l(e){return _e(void 0,void 0,void 0,(function(){return ze(this,(function(n){switch(n.label){case 0:return re(!0),Ye.current?[4,t(e,Ye.current)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ge(Ee()),[2]}}))}))}function s(e){var n;n=e,Boolean(null===(n=null==n?void 0:n.twoStepVerificationData)||void 0===n?void 0:n.ticket)?(n={userId:(n=e).user.id.toString(),challengeId:n.twoStepVerificationData.ticket},re(!1),en(n)):o(e)?a(e):l(e.user.id.toString())}function p(){S(""),w("")}function h(e,n){Z(r.EmailOtpSessionToken),De(e),Me(n)}function m(){Z(r.Username),De(""),Me("")}function v(e){return _e(void 0,void 0,void 0,(function(){var t,o,a;return ze(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,n(e)];case 1:return o=i.sent(),t=o.authParams,(o=o.clientKeyPair)&&(Ye.current=o),[4,(c=t,xe(void 0,void 0,Promise,(function(){var e;return Le(this,(function(n){switch(n.label){case 0:return e={url:e=se("/v2/login"),withCredentials:!0},[4,u.httpService.post(e,c)];case 1:return[2,n.sent().data]}}))})))];case 2:return a=i.sent(),t.secureAuthenticationIntent&&be("SuccessWithSAI"),be("Success"),s(a),[3,4];case 3:return function(e,n){if(d.AccountIntegrityChallengeService.Generic.ChallengeError.matchAbandoned(e))return re(!1),ln(""),J(0),0;var t,o,a=Ve(e);switch(a){case 2:return nn(e),0;case 4:return rn(),0;case 18:return tn(e),0;case 9:return on(),0;case 20:return cn(e),0;default:p(),re(!1),be(function(e){var n=le;switch(e){case 1:n="InvalidCredentials";break;case 3:n="AccountNotFound";break;case 6:n="AccountIssue";break;case 7:n="TooManyAttempts";break;case 9:n=ce;break;case 10:n="UnverifiedAccount";break;case 11:n="CaptchaLoadFailed";break;case 12:n="CaptchaVerifyFailed";break;case 14:n="LuoBuUserDenied";break;case 13:n="CaptchaUnknownError";break;case 16:n="ScreenTimeRestricted";break;default:n=le}return n}(a)),t=b(ye(a,n)),n===r.EmailOtpSessionToken?(o=String(a),f.eventStreamService.sendEventWithTarget(Oe.formInteraction,Ue.context.enterOTP,{field:Ue.field.errorMessage,aType:Ue.aType.shown,btn:Ue.btn.login,errorCode:o}),0<z&&(ln("",!0),fe(t)),ln(t)):fe(t),J(0)}}(a=i.sent(),e.ctype),[3,4];case 4:return[2]}var c}))}))}var g,b=e.translate,y=($e=(0,i.useState)(""))[0],w=$e[1],E=(Fe=(0,i.useState)(""))[0],S=Fe[1],C=(te=(0,i.useState)(""))[0],T=te[1],k=(H=(0,i.useState)(""))[0],I=H[1],A=(g=(0,i.useState)(""))[0],P=g[1],x=(ue=(0,i.useState)(""))[0],L=ue[1],V=(e=(0,i.useState)(0))[0],F=e[1],B=($e=(0,i.useState)(""))[0],W=$e[1],K=(Fe=(0,i.useState)(""))[0],q=Fe[1],H=(te=(0,i.useState)([]))[0],_=te[1],z=(g=(0,i.useState)(0))[0],J=g[1],Y=(ue=(0,i.useState)(""))[0],$=ue[1],X=(e=(0,i.useState)(r.Username))[0],Z=e[1],ee=($e=(0,i.useState)(""))[0],ne=$e[1],te=(Fe=(0,i.useState)(!1))[0],re=Fe[1],ue=(g=(0,i.useState)(""))[0],fe=g[1],pe=(e=(0,i.useState)(!1))[0],he=e[1],me=($e=(0,i.useState)(""))[0],ve=$e[1],Se=(Fe=(0,i.useState)(""))[0],Ie=Fe[1],Ne=(g=(0,i.useState)(""))[0],De=g[1],Re=(e=(0,i.useState)(""))[0],Me=e[1],Fe=($e=(0,i.useState)(!1))[0],We=$e[1],Qe=(g=(0,i.useState)(100))[0],Ke=g[1],Je=!0,Ye=(0,i.useRef)({}),$e=(e=(0,i.useState)(""))[0],Xe=e[1],Ze=(e=(g=(0,i.useState)(null))[0],g[1]),en=function(e){P(e.userId),L(e.challengeId)},nn=function(e){e=function(e){var n=Ce(e);"object"==typeof e&&Ce(e.data).forEach((function(e){return n.push(e)}));var t=n[0]||",";try{var r=JSON.parse(t);return{dataExchange:r.dxBlob,unifiedCaptchaId:r.unifiedCaptchaId}}catch(r){return{unifiedCaptchaId:(e=t.split(","))[0],dataExchange:e[1]}}}(e),be("Captcha"),w((e=e).unifiedCaptchaId),S(e.dataExchange)},tn=function(e){e=function(e){var n=Ce(e);return"object"==typeof e&&Ce(e.data).forEach((function(e){return n.push(e)})),e=n[0]||"",{userId:(e=JSON.parse(e)).userId,sessionId:e.sessionId}}(e),be("SecurityQuestionRequired"),P((e=e).userId),W(e.sessionId)},rn=function(){be("PasswordResetRequired"),ge(ae.securityNotification)},on=function(){p(),he(!0),be(ce)},an=function(){fe(b(j))},cn=function(e){p();var n,t;t=[],n=Ce(e=e),"object"==typeof e&&(Ce(e.data).forEach((function(e){return n.push(e)})),e=n[0]||"",t=JSON.parse(e).users),e=t;_(e),t=e.length,e="",X===r.EmailOtpSessionToken&&(e=Ue.context.disambiguationOTP),f.eventStreamService.sendEventWithTarget(Oe.pageLoad,e,{numUsers:String(t)})},ln=function(e,n){void 0===n&&(n=!1),window.dispatchEvent(new CustomEvent("onEnterEmailVerifyCodeError",{detail:{errorMessage:e,shouldCloseModal:n}})),Me("")},un=function(e){void 0===e&&(e=""),p(),J(0),ln(e),re(!1)},sn=function(e){void 0===e&&(e=!0);var n=(n=X===r.AuthToken?{ctype:X,cvalue:me,password:Se}:X===r.EmailOtpSessionToken?{ctype:X,cvalue:Ne,password:Re}:{ctype:pe?r.Username:X,cvalue:Y,password:ee},C&&k&&(n.captchaId=C,n.captchaToken=k),B&&K&&(n.securityQuestionSessionId=B,n.securityQuestionRedemptionToken=K,W(""),q("")),n);if(z&&(n.userId=z),e){if(!Y||!ee)return void fe(b(G));f.eventStreamService.sendEventWithTarget(Oe.formInteraction,Ue.context.loginPage,{field:Ue.field.loginSubmitButtonName,aType:Ue.aType.click}),be("Attempt"),Je&&(be("FirstAttempt"),Je=!1)}re(!0),v(n)};return(0,i.useEffect)((function(){_e(void 0,void 0,Promise,(function(){var e,n;return ze(this,(function(t){switch(t.label){case 0:return[4,xe(void 0,void 0,Promise,(function(){var e;return Le(this,(function(n){switch(n.label){case 0:return e={url:e=de("/auth-token-service/v1/login/metadata"),withCredentials:!0},[4,u.httpService.get(e)];case 1:return[2,n.sent().data]}}))}))];case 1:return n=t.sent(),Ze(null!==(e=null==n?void 0:n.ShouldFrontLoadQrCode)&&void 0!==e&&e),[4,xe(void 0,void 0,Promise,(function(){var e;return Le(this,(function(n){switch(n.label){case 0:return e={url:e=de("/otp-service/v1/metadata"),withCredentials:!0},[4,u.httpService.get(e)];case 1:return[2,n.sent().data]}}))}))];case 2:return(n=t.sent())&&(We(null!==(e=n.IsOtpEnabled)&&void 0!==e&&e),Ke(null!==(n=n.OtpCodeLength)&&void 0!==n?n:0)),[2]}}))}))}),[]),(0,i.useEffect)((function(){B&&K&&sn(!1)}),[B&&K]),(0,i.useEffect)((function(){Se&&me&&sn(!1)}),[Se,me]),(0,i.useEffect)((function(){Ne&&Re&&sn(!1)}),[Ne,Re]),(0,i.useEffect)((function(){pe&&sn(!1)}),[pe]),(0,i.useEffect)((function(){z&&sn(!1)}),[z]),c().createElement("div",{id:"login-base"},c().createElement("div",{className:"section-content login-section"},c().createElement("h1",{className:"login-header"},b(D)),c().createElement(Be,{captchaId:C,captchaToken:k,credentialValue:Y,password:ee,isLoading:te,errorMsg:ue,translate:b,onFormSubmit:sn,onCredentialValueChange:function(e){fe(""),$(e),Z(we(e))},onPasswordChange:function(e){fe(""),ne(e)}}),c().createElement(He,null),c().createElement(je,{shouldRenderCrossDeviceLoginButton:!e,onCrossDeviceLoginCodeValidated:function(e){re(!0),Z(r.AuthToken),ve(e.code),Ie(e.privateKey)},isOtpLoginEnabled:Fe,openOtpLoginModal:function(){var e;f.eventStreamService.sendEventWithTarget(Oe.formInteraction,Ue.context.loginPage,{field:Ue.field.loginOTP,aType:Ue.aType.click}),d.EmailVerifyCodeModalService&&(e={containerId:ie,codeLength:Qe,onEmailCodeEntered:h,onModalAbandoned:m,enterEmailTitle:b(M),enterEmailDescription:b(N),enterCodeTitle:b(R),enterCodeDescription:b(O),origin:"login",translate:b},d.EmailVerifyCodeModalService.renderEmailVerifyCodeModal(e))},translate:b}),c().createElement("div",{id:"crossDeviceLoginDisplayCode-container","data-frontload-qr-code":e}),c().createElement("div",{id:ie}),c().createElement(qe,null)),y&&E&&c().createElement(Te,{containerId:"react-captcha-container",actionType:d.AccountIntegrityChallengeService.Captcha.ActionType.Login,unifiedCaptchaId:y,dataExchange:E,onCaptchaChallengeCompleted:function(e){T(e.captchaId),I(e.captchaToken)},onCaptchaChallengeInvalidated:function(e){var n=function(e){var n=(t=d.CaptchaConstants.errorCodes).failedToLoadProviderScript,t=t.failedToVerify;switch(e){case n:return 11;case t:return 12;default:return 13}}(e.errorCode);e=we(Y),e=b(ye(n,e));fe(e),un(e)},onCaptchaChallengeAbandoned:function(){un()},onUnknownError:an}),A&&B&&c().createElement(Ae,{userId:A,sessionId:B,onSecurityQuestionsChallengeCompleted:function(e){q(e.redemptionToken)},onSecurityQuestionsChallengeInvalidated:function(e){W(""),q(""),sn(!1)},onSecurityQuestionsChallengeAbandoned:function(e){P(""),W(""),un()},onUnknownError:an}),A&&x&&c().createElement(ke,{userId:A,challengeId:x,on2svChallengeCompleted:function(e){return _e(void 0,void 0,void 0,(function(){var n;return ze(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(r=A,i={challengeId:x,verificationToken:e.verificationToken,rememberDevice:e.rememberDevice},xe(void 0,void 0,Promise,(function(){var e;return Le(this,(function(n){switch(n.label){case 0:return e={url:e=se("/v3/users/"+r+"/two-step-verification/login"),withCredentials:!0},[4,u.httpService.post(e,i)];case 1:return[2,n.sent().data]}}))})))];case 1:return o(n=t.sent())?a(n):l(A),[3,3];case 2:return t.sent(),an(),[3,3];case 3:return[2]}var r,i}))}))},on2svChallengeInvalidated:function(e){F(V+1);var n=b(oe);fe(n),V<3?sn(!1):un(n)},on2svChallengeAbandoned:function(e){P(""),L(""),un()},onUnknownError:an}),c().createElement(Ge,{identityVerificationLoginTicket:$e,translate:b}),0<H.length&&c().createElement(Pe,{containerId:"react-account-selector-container",users:H,onAccountSelection:function(e){_([]),J(e),e="",X===r.EmailOtpSessionToken&&(e=Ue.context.disambiguationOTP),f.eventStreamService.sendEventWithTarget(Oe.formInteraction,e,{field:Ue.field.accountSelection})},onAccountSelectorAbandoned:function(){_([]),re(!1),ln("")},titleText:b(Q),helpText:b(U)+(X===r.EmailOtpSessionToken?" "+b("Description.AccountSelectorOtpTimeWarning",{timeLimitSec:"60"}):"")}))}),ue);function Ye(){var e=Ne();e?(0,l.render)(c().createElement(Je,null),e):window.requestAnimationFrame(Ye)}(0,u.ready)((function(){Ye()}))}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("ReactLogin");